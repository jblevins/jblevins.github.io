!function(e){var t=[],n=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,{acceptNode:function(e){if(e.nodeType==1){return NodeFilter.FILTER_ACCEPT}return e.nodeValue.search("Begin content from page:")>-1||e.nodeValue.search("End of page content from page: ")>-1}}),r=document.createElement("div"),i,s=[],o=document.createTextNode("Not in reusable"),u=function(e){o.nodeValue=this.hasAttribute("from_reusable")?this.getAttribute("from_reusable"):"Not in a reusable";r.style.left="0px";r.style.top="0px";r.style.visibility="hidden";setTimeout(function(){r.style.left=Math.min(e.clientX+4,window.innerWidth-r.offsetWidth-15)+"px";r.style.top=Math.max(0,e.clientY-(4+r.offsetHeight))+"px";r.style.visibility="visible"},1);e.stopPropagation();return false},a=function(e){if(e.shiftKey){console.log("Current reusable path is "+o.nodeValue)}e.stopPropagation();return false};while(i=n.nextNode()){if(i.nodeType==1){if(t.length){i.setAttribute("from_reusable",t.join("->"));i.addEventListener("mouseover",u);i.addEventListener("click",a)}continue}if(i.nodeValue.search("Begin content from page:")>-1){t.push(i.nodeValue.replace("Begin content from page: ","").replace(/(^\s+)|(\s+$)/g,""));s.push(i.nodeValue.replace("Begin content from page: ","").replace(/(^\s+)|(\s+$)/g,""));continue}if(i.nodeValue.search("End of page content from page: ")>-1){t.pop();continue}}if(s.length){r.innerHTML='<div style="border-radius:8px;box-shadow:2px 2px 4px rgba(0,0,0,.7);white-space:nowrap;z-index:99999;padding:2px 5px;position:fixed; background:white; border: 1px solid black; width:auto; top:0;left:0;min-width: 60px;"></div>';r=r.firstChild;r.appendChild(o);document.body.appendChild(r);document.body.addEventListener("mouseover",u);alert("The following reusables are present on this page:\n"+s.join("\n"));console.log("The following reusables are present on this page:\n(These are also logged to the console)\n"+s.join("\n")+"\nShift click on an element to log its closest reusable to the console.")}else{r=i=u=o=n=t=s=undefined;if(window.location.href.search("s_debug=true")==-1){if(confirm("No reusables were found. Reload with s_debug=true?\n(You'll have to click the bookmarklet again afterward)")){window.location=window.location.href.replace(/\?|(#|$)/,"?s_debug=true&$1")}}else{alert("No reusables were found on the page.")}}}()